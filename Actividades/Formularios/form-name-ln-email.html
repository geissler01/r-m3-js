<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>

<body>
    <div class="container-fluid">
        <div class="row gap-4 justify-content-center">
            <div class="input-dates col-3 bg-light">
                <form class="">
                    <div class="mb-3">
                        <label for="name" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="name" aria-describedby="emailHelp">
                        <!-- <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div> -->
                    </div>
                    <div class="mb-3">
                        <label for="lastName" class="form-label">Apellidos</label>
                        <input type="text" class="form-control" id="lastName" aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Correo</label>
                        <input type="email" class="form-control" id="email">
                    </div>
                    <button type="button" class="btn btn-primary w-100" id="add">Registrar</button>
                </form>
            </div>

            <div class="save-input col-6 bg-light">
                <div class="mb-2">
                    <button class="btn btn-primary">Crear nuevo</button>
                </div>
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Nombres</th>
                            <th scope="col">Apellidos</th>
                            <th scope="col">Correo</th>
                            <th scope="col">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="newRow">
                        <!-- <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>Otto</td>
                            <td>@mdo</td>
                            <td>
                                <button class="btn btn-primary">Detalles</button>
                                <button class="btn btn-warning">Editar</button>
                                <button class="btn btn-danger">Eliminar</button>
                            </td>
                        </tr> -->
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>

        contador = 1;

        const register = document.getElementById("add");
        let newRow = document.getElementById("newRow");

        register.addEventListener("click", function(e){
            e.preventDefault()

            const name = document.getElementById("name");
            const lastName = document.getElementById("lastName");
            const email = document.getElementById("email");

            if (name.value.trim() === "" || lastName.value.trim() === "" || email.value.trim() === ""){
                Swal.fire({
                    title: "Error",
                    text: "Los campos no pueden estar vacíos",
                    icon: "error"
                });

                name.classList.add("is-invalid");
                lastName.classList.add("is-invalid");
                email.classList.add("is-invalid");
                return;
            } 

            name.classList.remove("is-invalid");
            lastName.classList.remove("is-invalid");
            email.classList.remove("is-invalid");

            name.classList.add("is-valid");
            lastName.classList.add("is-valid");
            email.classList.add("is-valid");

            let dates = []

            dates.push({
                name : name.value,
                lastName : lastName.value,
                email : email.value,
            });
            console.log(dates)
            dates.forEach(date => {
                newRow.innerHTML += `
                <tr>
                    <th scope="row">${contador}</th>
                        <td>${date.name}</td>
                        <td>${date.lastName}/td>
                        <td>${date.email}</td>
                        <td>
                            <button class="btn btn-primary btn-details">Detalles</button>
                            <button class="btn btn-warning btn-edit">Editar</button>
                            <button class="btn btn-danger btn-delate">Eliminar</button>
                        </td>
                    </tr>
                `
            });

            contador += 1;

            name.value = "";
            lastName.value = "";
            email.value = "";

            Swal.fire({
                title: "Éxito",
                text: "Registro agregado correctamente",
                icon: "success"
            });

            
        })

    </script>

</body>
</html>